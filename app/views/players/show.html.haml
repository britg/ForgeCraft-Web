#player-page.container

  .badge
  
    .heading

      .score
        %span.stat Score
        %span.value= @player.score

      %h1.player= @player
      .sep

    %table.completion

      %tbody

        %tr

          %td.forge
            %span.count= @player.forge_count
            Forges Complete
            (#{@player.forge_percent}%)

          %td.battle
            %span.count= @player.battle_win_count
            Battles Won
            (#{@player.battle_win_percent}%)

          %td.total
            %span.count= @player.item_count
            Total Items
            (#{@player.item_percent}%)
          
          %td.rare
            %span.count= @player.rare_count
            Rares
            (#{@player.rare_percent}%)

          %td.epic
            %span.count= @player.epic_count
            Epics
            (#{@player.epic_percent}%)

  .row

    .span-one-third

      .section.forges-wrap

        %h1.heading 
          Forges

        .sep

        - if @player.forges.active.any?
          .active-forges
            - @player.forges.active.each_with_index do |forge, index|
              = render "forges/stub", :forge => forge, :last => ((index+1)%3==0), :current => (@player.forge == forge)
          
          .clear

        - @player.forges.completed.each_with_index do |forge, index|
          = render "forges/stub", :forge => forge, :last => ((index+1)%3==0), :current => false
        
          .clear
    
    .span-one-third

      .section.hero-wrap

        %h1.heading Guards

        .sep

        = render "heroes/heroes", :player => @player, :loot => nil

        - if @player == current_player and current_player.practice_forge.present?
          = form_for [current_player.practice_forge, Event.new] do |f|
            = f.hidden_field :type, :value => Event::BATTLE_TYPE

            = f.submit "Fight the Training Dummy &rarr;".html_safe, :class => "btn primary"

    .span-one-third
      
      .section

        - if @player.loot.any?

          %h1.heading Showcase

          .sep

          .exceptional-loot

            - @player.best_set.each do |loot|
              = render "items/loot", :loot => loot

  .clear